  Endcap FPIX_3 {
    phiSegments 1
    etaCut 10
    zError 70

    @include-std CMS_Phase2/Pixel/Materials/disk_FPIX_2
    @include-std CMS_Phase2/Pixel/Conversions/On_flange/flange_FPIX
    @include-std CMS_Phase2/Pixel/Conversions/On_services_cylinder/stations_serving_TEPX_613
    @include-std CMS_Phase2/Pixel/Materials/Routing/routing_around_TEPX
    
    moduleShape rectangular
    alignEdges true 
    numDisks 1
    smallDelta 4 
    bigDelta 2 
    outerRadius 253.95
    numRings 4
    minZ 2357
    //barrelGap 1633.325 // Please activate either minZ (absolute), either barrelGap (relative startZ position from barrel).
    maxZ 2657
    bigParity 1
    smallParity -1
    zRotation 1.570796327
 
    
    Ring 1 {
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2x2_100x100
      @include-std CMS_Phase2/Pixel/Materials/module_FPIX2_R1_2x2_10000
      @include-std CMS_Phase2/Pixel/Resolutions/100x100_flat5
      numModules 24
      ringOuterRadius 126.35        // From Daniel: so that active sensor Rmin = 62.9 mm. 
    }   
    Disk 1-3 {
      Ring 1 {
        trackingTags pixel,tracker    
      }
    }    
    Disk 4 {
      Ring 1 {
        //trackingTags pixel,tracker
        plotColor 5                  // brown. Different color, since no dedicated tracking tag
      } 
    }
        
    Ring 2 {
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2x2_100x100
      @include-std CMS_Phase2/Pixel/Materials/module_FPIX2_R1_2x2_10000
      @include-std CMS_Phase2/Pixel/Resolutions/100x100_flat5
      trackingTags pixel,tracker
      numModules 34
      ringOuterRadius 164.0          // to be tuned
    }
    
    Ring 3 {
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2x2_100x100
      @include-std CMS_Phase2/Pixel/Materials/module_FPIX2_R3_2x2_10000
      @include-std CMS_Phase2/Pixel/Resolutions/100x100_flat5
      trackingTags pixel,tracker
      numModules 40
      ringOuterRadius 201.3          // to be tuned
    }
    
    Ring 4 {
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2x2_100x100
      @include-std CMS_Phase2/Pixel/Materials/module_FPIX2_R4_2x2_10000
      @include-std CMS_Phase2/Pixel/Resolutions/100x100_flat5
      trackingTags pixel,tracker
      numModules 50
      ringOuterRadius 237.9           // to be tuned
    }
    
//    Ring 5 {
//      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2x2_50x50_wide
//      @include-std CMS_Phase2/Pixel/Materials/module_FPIX2_R5_2x2_2500
//      @include-std CMS_Phase2/Pixel/Resolutions/50x50
//      trackingTags pixel,tracker
//      numModules 48
//      ringOuterRadius 273.95          // ????? So that active  Rmax < 254.52 mm, is that the right constraint?
//    }
    
    Disk 3 { placeZ 2357.69 }

    Disk 3 { destination FPIX13 }
  }
